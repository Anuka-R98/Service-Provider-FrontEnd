{"ast":null,"code":"import { Chart, registerables } from 'node_modules/chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"src/app/services/service.service\";\nChart.register(...registerables);\nexport let SummaryComponent = /*#__PURE__*/(() => {\n  class SummaryComponent {\n    constructor(userService, serviceService) {\n      this.userService = userService;\n      this.serviceService = serviceService;\n      this.labeldata = ['Admin', 'Users', 'Providers'];\n      this.realdata = [];\n      this.colordata = ['#E23E57', '#2ed12e', '#19A7CE'];\n      this.labeldata1 = ['Good', 'Normal', 'Bad'];\n      this.realdata1 = [];\n      this.colordata1 = ['#5bcfb4', '#cfb85b', '#cf5b61'];\n    }\n    ngOnInit() {\n      this.userChart();\n      this.serviceChart();\n    }\n    userChart() {\n      this.userService.getUsers().subscribe(response => {\n        this.chartdata = response;\n        console.log(response);\n        if (this.chartdata != null) {\n          let adminCount = 0;\n          let userCount = 0;\n          let providerCount = 0;\n          for (let i = 0; i < response.length; i++) {\n            if (this.chartdata[i].roles[0].name == 'ROLE_ADMIN') {\n              adminCount = adminCount + 1;\n            } else if (this.chartdata[i].roles[0].name == 'ROLE_SERVICE_PROVIDER') {\n              providerCount = providerCount + 1;\n            } else {\n              userCount = userCount + 1;\n            }\n          }\n          this.realdata.push(adminCount);\n          this.realdata.push(userCount);\n          this.realdata.push(providerCount);\n        }\n        this.RenderChart(this.labeldata, this.realdata, this.colordata, 'bar', 'barchart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'pie','piechart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'doughnut','dochart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'polarArea','pochart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'radar','rochart');\n      });\n    }\n\n    serviceChart() {\n      this.serviceService.getAllServices().subscribe(response => {\n        this.chartdata = response;\n        console.log(response);\n        if (this.chartdata != null) {\n          let good = 0;\n          let bad = 0;\n          let normal = 0;\n          for (let i = 0; i < response.length; i++) {\n            if (this.chartdata[i].averageRating >= 7.0) {\n              good = good + 1;\n            } else if (this.chartdata[i].averageRating >= 4) {\n              normal = normal + 1;\n            } else {\n              bad = bad + 1;\n            }\n          }\n          this.realdata1.push(good);\n          this.realdata1.push(normal);\n          this.realdata1.push(bad);\n        }\n        this.RenderChart(this.labeldata1, this.realdata1, this.colordata1, 'pie', 'piechart');\n      });\n    }\n    RenderChart(labeldata, maindata, colordata, type, id) {\n      const myChart = new Chart(id, {\n        type: type,\n        data: {\n          labels: labeldata,\n          datasets: [{\n            label: 'User types',\n            data: maindata,\n            backgroundColor: colordata,\n            borderColor: ['rgba(255, 99, 132, 1)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    }\n  }\n  SummaryComponent.ɵfac = function SummaryComponent_Factory(t) {\n    return new (t || SummaryComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ServiceService));\n  };\n  SummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SummaryComponent,\n    selectors: [[\"app-summary\"]],\n    decls: 9,\n    vars: 0,\n    consts: [[1, \"row\"], [1, \"col-lg-5\", \"chart-container\"], [\"id\", \"barchart\", 1, \"chart\"], [\"id\", \"piechart\", 1, \"chart\"]],\n    template: function SummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ɵɵtext(3, \"Users of the system\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"canvas\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1)(6, \"h2\");\n        i0.ɵɵtext(7, \"Rated & unrated services \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"canvas\", 3);\n        i0.ɵɵelementEnd()();\n      }\n    },\n    styles: [\".chart[_ngcontent-%COMP%]{width:100%;height:300px;margin-bottom:20px}.chart-container[_ngcontent-%COMP%]{margin-bottom:20px}\"]\n  });\n  return SummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}