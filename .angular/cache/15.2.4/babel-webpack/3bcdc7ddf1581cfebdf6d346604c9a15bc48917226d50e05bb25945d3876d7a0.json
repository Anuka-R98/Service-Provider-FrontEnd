{"ast":null,"code":"import { Chart, registerables } from 'node_modules/chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"src/app/services/service.service\";\nChart.register(...registerables);\nexport let SummaryComponent = /*#__PURE__*/(() => {\n  class SummaryComponent {\n    constructor(userService, serviceService) {\n      this.userService = userService;\n      this.serviceService = serviceService;\n      this.labeldata = ['Admin', 'Users', 'Providers'];\n      this.realdata = [];\n      this.colordata = ['#E23E57', '#2ed12e', '#19A7CE'];\n      this.labeldata1 = ['Good', 'Normal', 'Bad'];\n      this.realdata1 = [];\n      this.colordata1 = ['#5bcfb4', '#cfb85b', '#cf5b61'];\n    }\n    ngOnInit() {\n      this.userChart();\n      this.serviceChart();\n    }\n    userChart() {\n      this.userService.getUsers().subscribe(response => {\n        this.chartdata = response;\n        console.log(response);\n        if (this.chartdata != null) {\n          let adminCount = 0;\n          let userCount = 0;\n          let providerCount = 0;\n          for (let i = 0; i < response.length; i++) {\n            if (this.chartdata[i].roles[0].name == 'ROLE_ADMIN') {\n              adminCount = adminCount + 1;\n            } else if (this.chartdata[i].roles[0].name == 'ROLE_SERVICE_PROVIDER') {\n              providerCount = providerCount + 1;\n            } else {\n              userCount = userCount + 1;\n            }\n          }\n          this.realdata.push(adminCount);\n          this.realdata.push(userCount);\n          this.realdata.push(providerCount);\n        }\n        this.RenderChart(this.labeldata, this.realdata, this.colordata, 'bar', 'barchart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'pie','piechart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'doughnut','dochart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'polarArea','pochart');\n        // this.RenderChart(this.labeldata,this.realdata,this.colordata,'radar','rochart');\n      });\n    }\n\n    serviceChart() {\n      this.serviceService.getAllServices().subscribe(response => {\n        this.chartdata = response;\n        console.log(response);\n        if (this.chartdata != null) {\n          let excellent = 0;\n          let good = 0;\n          let normal = 0;\n          let bad = 0;\n          let unrated = 0;\n          for (let i = 0; i < response.length; i++) {\n            if (this.chartdata[i].averageRating >= 7.5) {\n              excellent++;\n            } else if (this.chartdata[i].averageRating >= 5.0) {\n              good++;\n            } else if (this.chartdata[i].averageRating >= 4.0) {\n              normal++;\n            } else if (this.chartdata[i].averageRating >= 0.0) {\n              bad++;\n            } else {\n              unrated++;\n            }\n          }\n          this.realdata1.push(good);\n          this.realdata1.push(normal);\n          this.realdata1.push(bad);\n          this.realdata1.push(bad);\n        }\n        this.RenderChart2(this.labeldata1, this.realdata1, this.colordata1, 'pie', 'piechart');\n      });\n    }\n    RenderChart(labeldata, maindata, colordata, type, id) {\n      const myChart = new Chart(id, {\n        type: type,\n        data: {\n          labels: labeldata,\n          datasets: [{\n            label: 'User types',\n            data: maindata,\n            backgroundColor: colordata,\n            borderColor: ['rgba(255, 99, 132, 1)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    }\n    RenderChart2(labeldata1, maindata1, colordata1, type, id) {\n      const myChart = new Chart(id, {\n        type: type,\n        data: {\n          labels: labeldata1,\n          datasets: [{\n            label: 'Service rating types',\n            data: maindata1,\n            backgroundColor: colordata1,\n            borderColor: ['rgba(255, 99, 132, 1)'],\n            borderWidth: 1\n          }]\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true\n            }\n          }\n        }\n      });\n    }\n  }\n  SummaryComponent.ɵfac = function SummaryComponent_Factory(t) {\n    return new (t || SummaryComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ServiceService));\n  };\n  SummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SummaryComponent,\n    selectors: [[\"app-summary\"]],\n    decls: 13,\n    vars: 0,\n    consts: [[1, \"dashboard\"], [1, \"header\"], [1, \"cards\"], [1, \"card\"], [\"id\", \"barchart\"], [\"id\", \"piechart\"]],\n    template: function SummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Summary\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"h2\");\n        i0.ɵɵtext(7, \"Users of the system\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"canvas\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 3)(10, \"h2\");\n        i0.ɵɵtext(11, \"Rated & unrated services\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"canvas\", 5);\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    styles: [\".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:50px}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px}.cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 0 10px #0000001a;margin:20px;padding:20px;width:500px;height:500px;overflow:hidden;position:relative}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}@media (max-width: 768px){.card[_ngcontent-%COMP%]{width:90%;height:auto}}\"]\n  });\n  return SummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}